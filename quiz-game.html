<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Quiz Game | Kausheek Nayak</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0a0a0a;
      color: #ffffff;
      overflow-x: hidden;
    }

    /* Animated Background */
    #particles-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
    }

    .content-wrapper {
      position: relative;
      z-index: 2;
    }

    /* Gradient Text */
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 8s ease infinite;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Glow Card */
    .glow-card {
      position: relative;
      background: rgba(15, 15, 25, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: 1px solid rgba(102, 126, 234, 0.2);
    }

    .glow-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 60px rgba(102, 126, 234, 0.4);
    }

    /* Button Styles */
    .btn-primary {
      padding: 14px 40px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 50px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .btn-primary:hover {
      transform: scale(1.05);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
    }

    .btn-secondary {
      padding: 14px 40px;
      background: rgba(102, 126, 234, 0.1);
      border: 2px solid rgba(102, 126, 234, 0.3);
      border-radius: 50px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-secondary:hover {
      background: rgba(102, 126, 234, 0.2);
      border-color: rgba(102, 126, 234, 0.5);
      transform: scale(1.05);
    }

    /* Category Cards */
    .category-card {
      background: rgba(15, 15, 25, 0.8);
      border: 2px solid rgba(102, 126, 234, 0.3);
      border-radius: 15px;
      padding: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }

    .category-card:hover {
      transform: translateY(-10px);
      border-color: rgba(102, 126, 234, 0.8);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
      background: rgba(102, 126, 234, 0.1);
    }

    .category-card.selected {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.2);
    }

    /* Answer Options */
    .answer-option {
      background: rgba(15, 15, 25, 0.8);
      border: 2px solid rgba(102, 126, 234, 0.3);
      border-radius: 15px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
    }

    .answer-option:hover {
      border-color: rgba(102, 126, 234, 0.6);
      background: rgba(102, 126, 234, 0.1);
      transform: translateX(10px);
    }

    .answer-option.selected {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.2);
    }

    .answer-option.correct {
      border-color: #10b981;
      background: rgba(16, 185, 129, 0.2);
      animation: correctPulse 0.5s ease;
    }

    .answer-option.incorrect {
      border-color: #ef4444;
      background: rgba(239, 68, 68, 0.2);
      animation: incorrectShake 0.5s ease;
    }

    @keyframes correctPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes incorrectShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    /* Progress Bar */
    .progress-bar {
      height: 8px;
      background: rgba(102, 126, 234, 0.2);
      border-radius: 10px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      transition: width 0.3s ease;
      box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
    }

    /* Timer */
    .timer {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 4px solid rgba(102, 126, 234, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      position: relative;
    }

    .timer.warning {
      border-color: #ef4444;
      animation: timerPulse 1s infinite;
    }

    @keyframes timerPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Score Display */
    .score-badge {
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 15px;
      padding: 10px 20px;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    /* Fade In Animation */
    .fade-in {
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Hide class */
    .hidden {
      display: none !important;
    }

    /* Leaderboard */
    .leaderboard-item {
      background: rgba(15, 15, 25, 0.8);
      border: 1px solid rgba(102, 126, 234, 0.2);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    .leaderboard-item:hover {
      background: rgba(102, 126, 234, 0.1);
      border-color: rgba(102, 126, 234, 0.4);
    }

    .rank-badge {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 18px;
    }

    .rank-1 { background: linear-gradient(135deg, #ffd700, #ffed4e); color: #000; }
    .rank-2 { background: linear-gradient(135deg, #c0c0c0, #e8e8e8); color: #000; }
    .rank-3 { background: linear-gradient(135deg, #cd7f32, #e8a87c); color: #000; }
    .rank-other { background: rgba(102, 126, 234, 0.2); color: #fff; }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .category-card {
        padding: 20px;
      }
      
      .answer-option {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
  <!-- Particle Background -->
  <canvas id="particles-canvas"></canvas>

  <div class="content-wrapper">
    <!-- Header -->
    <header class="p-6 border-b border-gray-800">
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <a href="portfolio.html" class="text-2xl md:text-3xl font-bold gradient-text">
          <i class="fas fa-arrow-left mr-2"></i> Back to Portfolio
        </a>
        <div class="flex items-center gap-4">
          <button id="leaderboard-btn" class="btn-secondary text-sm md:text-base">
            <i class="fas fa-trophy mr-2"></i>Leaderboard
          </button>
        </div>
      </div>
    </header>

    <!-- Main Container -->
    <div class="min-h-screen py-12 px-6">
      <div class="max-w-4xl mx-auto">
        
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="text-center fade-in">
          <div class="mb-8">
            <i class="fas fa-brain text-6xl gradient-text mb-4"></i>
            <h1 class="text-5xl md:text-6xl font-bold gradient-text mb-4">Quiz Master</h1>
            <p class="text-gray-400 text-lg md:text-xl">Test your knowledge across various topics!</p>
          </div>

          <div class="glow-card p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4">Enter Your Name</h2>
            <input 
              type="text" 
              id="player-name" 
              placeholder="Your Name" 
              class="w-full max-w-md px-6 py-3 bg-gray-900 border-2 border-gray-700 rounded-lg text-white text-center text-lg focus:outline-none focus:border-purple-500 transition-colors"
            />
          </div>

          <button id="start-btn" class="btn-primary text-lg">
            <i class="fas fa-play mr-2"></i>Start Quiz
          </button>
        </div>

        <!-- Category Selection -->
        <div id="category-screen" class="hidden fade-in">
          <h2 class="text-4xl font-bold text-center mb-4 gradient-text">Choose Your Category</h2>
          <p class="text-gray-400 text-center mb-8">Select a topic to begin your quiz journey</p>
          
          <div class="grid md:grid-cols-3 gap-6 mb-8" id="category-container">
            <!-- Categories will be inserted here -->
          </div>

          <div class="text-center">
            <button id="begin-quiz-btn" class="btn-primary text-lg" disabled>
              <i class="fas fa-rocket mr-2"></i>Begin Quiz
            </button>
          </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden fade-in">
          <!-- Quiz Header -->
          <div class="glow-card p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
              <div class="score-badge">
                <i class="fas fa-star"></i>
                <span>Score: <span id="current-score">0</span></span>
              </div>
              <div class="timer" id="timer">30</div>
              <div class="text-right">
                <p class="text-gray-400 text-sm">Question</p>
                <p class="text-xl font-bold">
                  <span id="current-question">1</span> / <span id="total-questions">10</span>
                </p>
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
          </div>

          <!-- Question Card -->
          <div class="glow-card p-8 mb-6">
            <h3 class="text-2xl md:text-3xl font-bold mb-6" id="question-text">Question will appear here</h3>
            <div id="answers-container" class="space-y-4">
              <!-- Answer options will be inserted here -->
            </div>
          </div>

          <div class="text-center">
            <button id="next-btn" class="btn-primary text-lg hidden">
              Next Question <i class="fas fa-arrow-right ml-2"></i>
            </button>
          </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden fade-in">
          <div class="text-center mb-8">
            <i class="fas fa-trophy text-6xl gradient-text mb-4"></i>
            <h2 class="text-4xl md:text-5xl font-bold gradient-text mb-4">Quiz Complete!</h2>
            <p class="text-gray-400 text-lg">Here's how you performed</p>
          </div>

          <div class="glow-card p-8 mb-8 text-center">
            <div class="mb-6">
              <p class="text-gray-400 mb-2">Your Score</p>
              <p class="text-6xl font-bold gradient-text" id="final-score">0/10</p>
            </div>
            
            <div class="grid md:grid-cols-3 gap-6 mb-6">
              <div class="bg-gray-900 p-4 rounded-lg">
                <p class="text-gray-400 text-sm mb-1">Correct</p>
                <p class="text-3xl font-bold text-green-500" id="correct-answers">0</p>
              </div>
              <div class="bg-gray-900 p-4 rounded-lg">
                <p class="text-gray-400 text-sm mb-1">Incorrect</p>
                <p class="text-3xl font-bold text-red-500" id="incorrect-answers">0</p>
              </div>
              <div class="bg-gray-900 p-4 rounded-lg">
                <p class="text-gray-400 text-sm mb-1">Accuracy</p>
                <p class="text-3xl font-bold text-purple-500" id="accuracy">0%</p>
              </div>
            </div>

            <div id="performance-message" class="text-xl mb-6"></div>
          </div>

          <div class="flex flex-col md:flex-row gap-4 justify-center">
            <button id="play-again-btn" class="btn-primary text-lg">
              <i class="fas fa-redo mr-2"></i>Play Again
            </button>
            <button id="change-category-btn" class="btn-secondary text-lg">
              <i class="fas fa-exchange-alt mr-2"></i>Change Category
            </button>
          </div>
        </div>

        <!-- Leaderboard Modal -->
        <div id="leaderboard-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-6">
          <div class="glow-card p-8 max-w-2xl w-full max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-3xl font-bold gradient-text">
                <i class="fas fa-trophy mr-2"></i>Leaderboard
              </h2>
              <button id="close-leaderboard" class="text-3xl hover:text-purple-400 transition-colors">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div id="leaderboard-content">
              <!-- Leaderboard items will be inserted here -->
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    // Particle Background (Same as portfolio)
    const canvas = document.getElementById('particles-canvas');
    const ctx = canvas.getContext('2d');
    
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const particles = [];
    const particleCount = 80;

    class Particle {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.vx = (Math.random() - 0.5) * 0.5;
        this.vy = (Math.random() - 0.5) * 0.5;
        this.radius = Math.random() * 2;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
        if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = 'rgba(102, 126, 234, 0.5)';
        ctx.fill();
      }
    }

    for (let i = 0; i < particleCount; i++) {
      particles.push(new Particle());
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(particle => {
        particle.update();
        particle.draw();
      });
      particles.forEach((p1, i) => {
        particles.slice(i + 1).forEach(p2 => {
          const dx = p1.x - p2.x;
          const dy = p1.y - p2.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          if (distance < 100) {
            ctx.beginPath();
            ctx.moveTo(p1.x, p1.y);
            ctx.lineTo(p2.x, p2.y);
            ctx.strokeStyle = `rgba(102, 126, 234, ${0.2 - distance / 500})`;
            ctx.stroke();
          }
        });
      });
      requestAnimationFrame(animate);
    }

    animate();

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    // Quiz Data
    const quizData = {
      javascript: {
        name: 'JavaScript',
        icon: 'fab fa-js',
        questions: [
          {
            question: 'What does "DOM" stand for in web development?',
            answers: ['Document Object Model', 'Data Object Management', 'Digital Output Method', 'Dynamic Object Module'],
            correct: 0
          },
          {
            question: 'Which method is used to add an element at the end of an array?',
            answers: ['push()', 'pop()', 'shift()', 'unshift()'],
            correct: 0
          },
          {
            question: 'What is the output of: typeof null?',
            answers: ['null', 'object', 'undefined', 'number'],
            correct: 1
          },
          {
            question: 'Which keyword is used to declare a constant in JavaScript?',
            answers: ['var', 'let', 'const', 'constant'],
            correct: 2
          },
          {
            question: 'What does JSON stand for?',
            answers: ['JavaScript Object Notation', 'Java Standard Object Notation', 'JavaScript Online Notation', 'Java Serialized Object Note'],
            correct: 0
          },
          {
            question: 'Which operator is used for strict equality in JavaScript?',
            answers: ['==', '===', '=', '!='],
            correct: 1
          },
          {
            question: 'What is a closure in JavaScript?',
            answers: ['A way to close the browser', 'A function inside another function', 'A method to end loops', 'A type of variable'],
            correct: 1
          },
          {
            question: 'Which method is used to remove the last element from an array?',
            answers: ['pop()', 'push()', 'shift()', 'slice()'],
            correct: 0
          },
          {
            question: 'What is the correct way to create a promise in JavaScript?',
            answers: ['new Promise()', 'create Promise()', 'Promise.new()', 'makePromise()'],
            correct: 0
          },
          {
            question: 'Which of these is NOT a JavaScript data type?',
            answers: ['String', 'Boolean', 'Float', 'Symbol'],
            correct: 2
          }
        ]
      },
      sports: {
        name: 'Sports',
        icon: 'fas fa-football-ball',
        questions: [
          {
            question: 'Which country won the FIFA World Cup 2018?',
            answers: ['Brazil', 'Germany', 'France', 'Argentina'],
            correct: 2
          },
          {
            question: 'How many players are there in a cricket team?',
            answers: ['10', '11', '12', '13'],
            correct: 1
          },
          {
            question: 'In which sport would you perform a slam dunk?',
            answers: ['Football', 'Basketball', 'Volleyball', 'Tennis'],
            correct: 1
          },
          {
            question: 'How long is an Olympic swimming pool?',
            answers: ['25 meters', '50 meters', '75 meters', '100 meters'],
            correct: 1
          },
          {
            question: 'Who is known as the "Lightning Bolt"?',
            answers: ['Usain Bolt', 'Mo Farah', 'Carl Lewis', 'Jesse Owens'],
            correct: 0
          },
          {
            question: 'In tennis, what is a score of zero called?',
            answers: ['Nothing', 'Zero', 'Love', 'Nil'],
            correct: 2
          },
          {
            question: 'How many rings are in the Olympic logo?',
            answers: ['4', '5', '6', '7'],
            correct: 1
          },
          {
            question: 'Which sport uses a shuttlecock?',
            answers: ['Tennis', 'Squash', 'Badminton', 'Table Tennis'],
            correct: 2
          },
          {
            question: 'In football, how many points is a touchdown worth?',
            answers: ['3 points', '6 points', '7 points', '8 points'],
            correct: 1
          },
          {
            question: 'What color jersey does the Tour de France leader wear?',
            answers: ['Green', 'Red', 'Yellow', 'Blue'],
            correct: 2
          }
        ]
      },
      general: {
        name: 'General Knowledge',
        icon: 'fas fa-globe',
        questions: [
          {
            question: 'What is the capital of France?',
            answers: ['London', 'Berlin', 'Paris', 'Madrid'],
            correct: 2
          },
          {
            question: 'Which planet is known as the Red Planet?',
            answers: ['Venus', 'Mars', 'Jupiter', 'Saturn'],
            correct: 1
          },
          {
            question: 'Who painted the Mona Lisa?',
            answers: ['Vincent van Gogh', 'Pablo Picasso', 'Leonardo da Vinci', 'Michelangelo'],
            correct: 2
          },
          {
            question: 'What is the largest ocean on Earth?',
            answers: ['Atlantic Ocean', 'Indian Ocean', 'Arctic Ocean', 'Pacific Ocean'],
            correct: 3
          },
          {
            question: 'How many continents are there?',
            answers: ['5', '6', '7', '8'],
            correct: 2
          },
          {
            question: 'What is the smallest country in the world?',
            answers: ['Monaco', 'Vatican City', 'San Marino', 'Liechtenstein'],
            correct: 1
          },
          {
            question: 'Which is the longest river in the world?',
            answers: ['Amazon', 'Nile', 'Yangtze', 'Mississippi'],
            correct: 1
          },
          {
            question: 'What year did World War II end?',
            answers: ['1943', '1944', '1945', '1946'],
            correct: 2
          },
          {
            question: 'Who wrote "Romeo and Juliet"?',
            answers: ['Charles Dickens', 'William Shakespeare', 'Jane Austen', 'Mark Twain'],
            correct: 1
          },
          {
            question: 'What is the chemical symbol for gold?',
            answers: ['Go', 'Gd', 'Au', 'Ag'],
            correct: 2
          }
        ]
      }
    };

    // Game State
    let gameState = {
      playerName: '',
      selectedCategory: '',
      currentQuestionIndex: 0,
      score: 0,
      correctAnswers: 0,
      incorrectAnswers: 0,
      timerInterval: null,
      timeLeft: 30
    };

    // DOM Elements
    const welcomeScreen = document.getElementById('welcome-screen');
    const categoryScreen = document.getElementById('category-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultsScreen = document.getElementById('results-screen');

    const playerNameInput = document.getElementById('player-name');
    const startBtn = document.getElementById('start-btn');
    const categoryContainer = document.getElementById('category-container');
    const beginQuizBtn = document.getElementById('begin-quiz-btn');
    const nextBtn = document.getElementById('next-btn');
    const playAgainBtn = document.getElementById('play-again-btn');
    const changeCategoryBtn = document.getElementById('change-category-btn');
    const leaderboardBtn = document.getElementById('leaderboard-btn');
    const leaderboardModal = document.getElementById('leaderboard-modal');
    const closeLeaderboardBtn = document.getElementById('close-leaderboard');

    // Initialize Categories
    function initCategories() {
      categoryContainer.innerHTML = '';
      Object.keys(quizData).forEach(key => {
        const category = quizData[key];
        const card = document.createElement('div');
        card.className = 'category-card';
        card.innerHTML = `
          <i class="${category.icon} text-5xl mb-4 gradient-text"></i>
          <h3 class="text-xl font-bold">${category.name}</h3>
          <p class="text-gray-400 mt-2">${category.questions.length} Questions</p>
        `;
        card.addEventListener('click', () => selectCategory(key, card));
        categoryContainer.appendChild(card);
      });
    }

    // Select Category
    function selectCategory(categoryKey, element) {
      document.querySelectorAll('.category-card').forEach(card => {
        card.classList.remove('selected');
      });
      element.classList.add('selected');
      gameState.selectedCategory = categoryKey;
      beginQuizBtn.disabled = false;
      beginQuizBtn.style.opacity = '1';
      beginQuizBtn.style.cursor = 'pointer';
    }

    // Start Quiz Flow
    startBtn.addEventListener('click', () => {
      const name = playerNameInput.value.trim();
      if (name === '') {
        alert('Please enter your name!');
        return;
      }
      gameState.playerName = name;
      welcomeScreen.classList.add('hidden');
      categoryScreen.classList.remove('hidden');
      initCategories();
    });

    beginQuizBtn.addEventListener('click', () => {
      if (!gameState.selectedCategory) return;
      categoryScreen.classList.add('hidden');
      quizScreen.classList.remove('hidden');
      startQuiz();
    });

    // Start Quiz
    function startQuiz() {
      gameState.currentQuestionIndex = 0;
      gameState.score = 0;
      gameState.correctAnswers = 0;
      gameState.incorrectAnswers = 0;
      loadQuestion();
    }

    // Load Question
    function loadQuestion() {
      const questions = quizData[gameState.selectedCategory].questions;
      const currentQ = questions[gameState.currentQuestionIndex];

      document.getElementById('current-question').textContent = gameState.currentQuestionIndex + 1;
      document.getElementById('total-questions').textContent = questions.length;
      document.getElementById('current-score').textContent = gameState.score;
      document.getElementById('question-text').textContent = currentQ.question;

      const progress = ((gameState.currentQuestionIndex + 1) / questions.length) * 100;
      document.getElementById('progress-fill').style.width = progress + '%';

      // Load answers
      const answersContainer = document.getElementById('answers-container');
      answersContainer.innerHTML = '';
      currentQ.answers.forEach((answer, index) => {
        const answerDiv = document.createElement('div');
        answerDiv.className = 'answer-option';
        answerDiv.innerHTML = `
          <div class="flex items-center">
            <span class="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center mr-4 font-bold">
              ${String.fromCharCode(65 + index)}
            </span>
            <span class="text-lg">${answer}</span>
          </div>
        `;
        answerDiv.addEventListener('click', () => selectAnswer(index, answerDiv));
        answersContainer.appendChild(answerDiv);
      });

      nextBtn.classList.add('hidden');
      startTimer();
    }

    // Select Answer
    function selectAnswer(selectedIndex, element) {
      if (element.classList.contains('correct') || element.classList.contains('incorrect')) return;

      clearInterval(gameState.timerInterval);
      const questions = quizData[gameState.selectedCategory].questions;
      const currentQ = questions[gameState.currentQuestionIndex];
      const correctIndex = currentQ.correct;

      // Disable all options
      document.querySelectorAll('.answer-option').forEach(opt => {
        opt.style.pointerEvents = 'none';
      });

      if (selectedIndex === correctIndex) {
        element.classList.add('correct');
        gameState.score += 10;
        gameState.correctAnswers++;
        showNotification('Correct! +10 points', 'success');
      } else {
        element.classList.add('incorrect');
        document.querySelectorAll('.answer-option')[correctIndex].classList.add('correct');
        gameState.incorrectAnswers++;
        showNotification('Incorrect!', 'error');
      }

      document.getElementById('current-score').textContent = gameState.score;
      nextBtn.classList.remove('hidden');
    }

    // Timer
    function startTimer() {
      gameState.timeLeft = 30;
      const timerEl = document.getElementById('timer');
      timerEl.textContent = gameState.timeLeft;
      timerEl.classList.remove('warning');

      gameState.timerInterval = setInterval(() => {
        gameState.timeLeft--;
        timerEl.textContent = gameState.timeLeft;

        if (gameState.timeLeft <= 10) {
          timerEl.classList.add('warning');
        }

        if (gameState.timeLeft === 0) {
          clearInterval(gameState.timerInterval);
          const questions = quizData[gameState.selectedCategory].questions;
          const correctIndex = questions[gameState.currentQuestionIndex].correct;
          document.querySelectorAll('.answer-option')[correctIndex].classList.add('correct');
          document.querySelectorAll('.answer-option').forEach(opt => {
            opt.style.pointerEvents = 'none';
          });
          gameState.incorrectAnswers++;
          showNotification('Time\'s up!', 'error');
          nextBtn.classList.remove('hidden');
        }
      }, 1000);
    }

    // Next Question
    nextBtn.addEventListener('click', () => {
      const questions = quizData[gameState.selectedCategory].questions;
      gameState.currentQuestionIndex++;

      if (gameState.currentQuestionIndex < questions.length) {
        document.querySelectorAll('.answer-option').forEach(opt => {
          opt.style.pointerEvents = 'auto';
        });
        loadQuestion();
      } else {
        showResults();
      }
    });

    // Show Results
    function showResults() {
      quizScreen.classList.add('hidden');
      resultsScreen.classList.remove('hidden');

      const questions = quizData[gameState.selectedCategory].questions;
      const totalQuestions = questions.length;
      const accuracy = Math.round((gameState.correctAnswers / totalQuestions) * 100);

      document.getElementById('final-score').textContent = `${gameState.score}/${totalQuestions * 10}`;
      document.getElementById('correct-answers').textContent = gameState.correctAnswers;
      document.getElementById('incorrect-answers').textContent = gameState.incorrectAnswers;
      document.getElementById('accuracy').textContent = accuracy + '%';

      let message = '';
      if (accuracy === 100) {
        message = 'ðŸ† Perfect Score! You\'re a genius!';
      } else if (accuracy >= 80) {
        message = 'ðŸŒŸ Excellent work! Keep it up!';
      } else if (accuracy >= 60) {
        message = 'ðŸ‘ Good job! Room for improvement!';
      } else if (accuracy >= 40) {
        message = 'ðŸ“š Keep practicing! You can do better!';
      } else {
        message = 'ðŸ’ª Don\'t give up! Try again!';
      }

      document.getElementById('performance-message').textContent = message;

      // Save to leaderboard
      saveToLeaderboard();
    }

    // Play Again
    playAgainBtn.addEventListener('click', () => {
      resultsScreen.classList.add('hidden');
      quizScreen.classList.remove('hidden');
      startQuiz();
    });

    // Change Category
    changeCategoryBtn.addEventListener('click', () => {
      resultsScreen.classList.add('hidden');
      categoryScreen.classList.remove('hidden');
      initCategories();
    });

    // Notification
    function showNotification(message, type) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 100px;
        right: 20px;
        background: ${type === 'success' ? 'linear-gradient(135deg, #10b981, #059669)' : 'linear-gradient(135deg, #ef4444, #dc2626)'};
        color: white;
        padding: 20px 30px;
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        z-index: 1000;
        animation: slideIn 0.3s ease;
        font-weight: 600;
      `;
      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px;">
          <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-times-circle'} text-2xl"></i>
          <span>${message}</span>
        </div>
      `;
      document.body.appendChild(notification);

      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => notification.remove(), 300);
      }, 2000);
    }

    // Leaderboard Functions
    function saveToLeaderboard() {
      let leaderboard = JSON.parse(localStorage.getItem('quizLeaderboard')) || [];
      
      const entry = {
        name: gameState.playerName,
        category: quizData[gameState.selectedCategory].name,
        score: gameState.score,
        correct: gameState.correctAnswers,
        total: quizData[gameState.selectedCategory].questions.length,
        accuracy: Math.round((gameState.correctAnswers / quizData[gameState.selectedCategory].questions.length) * 100),
        date: new Date().toLocaleDateString()
      };

      leaderboard.push(entry);
      leaderboard.sort((a, b) => b.score - a.score);
      leaderboard = leaderboard.slice(0, 10); // Keep top 10

      localStorage.setItem('quizLeaderboard', JSON.stringify(leaderboard));
    }

    function displayLeaderboard() {
      const leaderboard = JSON.parse(localStorage.getItem('quizLeaderboard')) || [];
      const content = document.getElementById('leaderboard-content');

      if (leaderboard.length === 0) {
        content.innerHTML = '<p class="text-center text-gray-400 py-8">No scores yet. Be the first!</p>';
        return;
      }

      content.innerHTML = leaderboard.map((entry, index) => {
        const rankClass = index === 0 ? 'rank-1' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : 'rank-other';
        return `
          <div class="leaderboard-item">
            <div class="flex items-center gap-4">
              <div class="rank-badge ${rankClass}">${index + 1}</div>
              <div>
                <p class="font-bold text-lg">${entry.name}</p>
                <p class="text-gray-400 text-sm">${entry.category} â€¢ ${entry.date}</p>
              </div>
            </div>
            <div class="text-right">
              <p class="font-bold text-2xl gradient-text">${entry.score}</p>
              <p class="text-gray-400 text-sm">${entry.correct}/${entry.total} â€¢ ${entry.accuracy}%</p>
            </div>
          </div>
        `;
      }).join('');
    }

    leaderboardBtn.addEventListener('click', () => {
      displayLeaderboard();
      leaderboardModal.classList.remove('hidden');
    });

    closeLeaderboardBtn.addEventListener('click', () => {
      leaderboardModal.classList.add('hidden');
    });

    leaderboardModal.addEventListener('click', (e) => {
      if (e.target === leaderboardModal) {
        leaderboardModal.classList.add('hidden');
      }
    });

    // Add animation styles
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from { transform: translateX(400px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(400px); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>